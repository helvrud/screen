<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PhysChem Department Presentation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        :root {
            --university-blue: #003366;
            --accent-gold: #D4AF37;
        }

        body, html {
            margin: 0; padding: 0;
            background-color: #000;
            overflow: hidden;
            width: 100vw; height: 100vh;
            font-family: 'Segoe UI', sans-serif;
            color: white;
            cursor: none;
        }

        .slide {
            position: absolute; top: 0; left: 0;
            width: 100vw; height: 100vh;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            visibility: hidden; opacity: 0;
            text-align: center;
        }

        /* Typography for "Blowing" effects */
        .title-large { font-size: 5rem; font-weight: 800; margin: 0; text-transform: uppercase; }
        .subtitle { font-size: 2rem; color: var(--accent-gold); margin-top: 10px; }
        .content-text { font-size: 1.8rem; max-width: 800px; line-height: 1.4; margin-top: 30px; }

        /* Grid Specifics */
        #grid-container {
            display: grid; grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr); gap: 15px;
            width: min(80vw, 80vh); height: min(80vw, 80vh);
        }
        .slot { background: #111; border-radius: 4px; }
        .person-photo {
            position: fixed; z-index: 10; object-fit: cover;
            border-radius: 4px; top: 50%; left: 50%;
            transform: translate(-50%, -50%); opacity: 0; visibility: hidden;
            aspect-ratio: 1/1; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }
        .name-label {
            position: fixed; z-index: 100; top: calc(50% + 32vh);
            left: 50%; transform: translateX(-50%);
            font-size: 2.5rem; font-weight: bold; opacity: 0; visibility: hidden;
        }

        #youtube-player { width: 100%; height: 100%; }
    </style>
</head>
<body>

    <div id="slide-intro" class="slide">
        <h1 class="title-large">Department of<br>Physical Chemistry</h1>
        <p class="subtitle">Charles University in Prague</p>
    </div>

    <div id="slide-history" class="slide">
        <h2 class="title-large">Our History</h2>
        <p class="content-text">Established as a cornerstone of research since the early 20th century, leading the way in molecular modeling and quantum chemistry.</p>
    </div>

    <div id="slide-grid" class="slide">
        <div id="grid-container">
            <div class="slot" id="slot-0"></div><div class="slot" id="slot-1"></div>
            <div class="slot" id="slot-2"></div><div class="slot" id="slot-3"></div>
            <div class="slot" id="slot-4"></div><div class="slot" id="slot-5"></div>
            <div class="slot" id="slot-6"></div><div class="slot" id="slot-7"></div>
            <div class="slot" id="slot-8"></div><div class="slot" id="slot-9"></div>
            <div class="slot" id="slot-10"></div><div class="slot" id="slot-11"></div>
            <div class="slot" id="slot-12"></div><div class="slot" id="slot-13"></div>
            <div class="slot" id="slot-14"></div><div class="slot" id="slot-15"></div>
        </div>
    </div>

    <div id="slide-awards" class="slide">
        <h2 class="title-large">Awards & Honors</h2>
        <p class="content-text">Home to Neuron Award winners, ERC grant recipients, and the prestigious Heyrovský Medalists.</p>
    </div>

    <div id="slide-labs" class="slide">
        <h2 class="title-large">World-Class Laboratories</h2>
        <p class="content-text">From Advanced Spectroscopy to Ultrafast Laser Dynamics and specialized Synthesis Labs.</p>
    </div>

    <div id="slide-groups" class="slide">
        <h2 class="title-large">Research Groups</h2>
        <p class="content-text">Focusing on Computational Chemistry, Surface Science, and Bio-physical interactions.</p>
    </div>

    <div id="slide-video" class="slide">
        <div id="youtube-player"></div>
    </div>

    <script>
        const peopleData = [
            { file: "person_JC.jpg", name: "prof. Ing., DrSc., Prof., Jiří Čejka" },
            { file: "person_FU.jpg", name: "Head of the Department, Prof. RNDr., Filip Uhlík, Ph.D." },
            { file: "person_MO.jpg", name: "Assoc. Prof., Doc. Maksym Opanasenko Ph.D. " },
            { file: "person_MS.jpg", name: "Associate Professor, Doc. Mariya Shamzhy Ph.D. " },
            { file: "person_JP.jpg", name: "Ing., Assistant Prof. Jan Přech, Ph.D." }
        ];


        const YOUTUBE_ID = "aIls-MJEnHs"; 
        let player;
        const elements = [];
        const gridSlide = document.getElementById('slide-grid');

        // Setup Portraits
        peopleData.forEach((person, i) => {
            const img = document.createElement('img');
            img.src = person.file; img.className = 'person-photo';
            gridSlide.appendChild(img);
            const label = document.createElement('div');
            label.className = 'name-label';
            label.innerText = person.name;
            gridSlide.appendChild(label);
            elements.push({ img, label, slot: document.getElementById(`slot-${i}`) });
        });

        // Load YouTube API
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        document.head.appendChild(tag);

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '100%', width: '100%', videoId: YOUTUBE_ID,
                playerVars: { 'autoplay': 1, 'mute': 1, 'controls': 0, 'rel': 0, 'enablejsapi': 1, 'origin': window.location.origin },
                events: { 'onStateChange': (e) => { if (e.data === YT.PlayerState.ENDED) startFullPresentation(); } }
            });
        }

        // --- EFFECT: Blower In/Out ---
        function animateStandardSlide(id, nextFunction) {
            const el = document.getElementById(id);
            const tl = gsap.timeline({ onComplete: nextFunction });

            tl.set(el, { visibility: 'visible', opacity: 0, scale: 0.5 })
              .to(el, { opacity: 1, scale: 1, duration: 1.5, ease: "back.out(1.7)" }) // "Blowing In"
              .to(el, { duration: 4 }) // Hold time
              .to(el, { opacity: 0, scale: 3, duration: 1, ease: "power2.in" }); // "Blowing Out / Exploding"
        }

        // --- MASTER SEQUENCE ---
        function startFullPresentation() {
            // Step 1: Intro
            animateStandardSlide('slide-intro', () => {
                // Step 2: History
                animateStandardSlide('slide-history', () => {
                    // Step 3: Portrait Grid (Special Logic)
                    playGridSlide();
                });
            });
        }

        function playGridSlide() {
            gsap.set("#slide-grid", { visibility: "visible", opacity: 1, scale: 1 });
            const gridTL = gsap.timeline();
            
            gsap.set(elements.map(e => e.img), { opacity: 0, visibility: 'hidden', top: '50%', left: '50%', width: '0vh', height: '0vh' });
            gsap.set(elements.map(e => e.label), { opacity: 0, visibility: 'hidden' });

            elements.forEach((el, i) => {
                const rect = el.slot.getBoundingClientRect();
                const appearanceTime = i * 2.4;
                gridTL.set([el.img, el.label], { visibility: 'visible' }, appearanceTime)
                .to(el.img, { opacity: 1, width: "60vh", height: "60vh", duration: 0.7, ease: "back.out(1.2)" }, appearanceTime)
                .to(el.label, { opacity: 1, duration: 0.5 }, appearanceTime + 0.2)
                .to(el.label, { opacity: 0, duration: 0.3, onComplete: () => gsap.set(el.label, { visibility: 'hidden' }) }, appearanceTime + 1.8)
                .to(el.img, { top: rect.top + (rect.height / 2), left: rect.left + (rect.width / 2), width: rect.width, height: rect.height, duration: 1.2, ease: "power3.inOut" }, appearanceTime + 1.8);
            });

            gridTL.to({}, { duration: 4 })
                  .to("#slide-grid", { opacity: 0, scale: 0.2, duration: 1, onComplete: playAwardsSlide });
        }

        function playAwardsSlide() { animateStandardSlide('slide-awards', playLabsSlide); }
        function playLabsSlide() { animateStandardSlide('slide-labs', playGroupsSlide); }
        function playGroupsSlide() { animateStandardSlide('slide-groups', playVideoSlide); }

        function playVideoSlide() {
            gsap.set(".slide", { visibility: "hidden", opacity: 0 });
            gsap.set("#slide-video", { visibility: "visible", opacity: 1 });
            player.seekTo(0);
            player.playVideo();
        }

        // Start on load
        window.onload = () => { if(player) startFullPresentation(); else setTimeout(startFullPresentation, 1000); };
    </script>
</body>
</html>